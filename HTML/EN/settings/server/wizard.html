<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>[% "SQUEEZECENTER" | string %]</title>

		<link rel="stylesheet" type="text/css" href="/html/ext/resources/css/ext-all.css" />
		<link rel="stylesheet" type="text/css" href="/Default/slim-ext.css" />
		<link rel="stylesheet" type="text/css" href="/Default/slimserver.css" />

		<style type="text/css">
		<!--
			html { background: #666666; }

			.maincontent {
				background: white;
			}

			form div { cursor: default; }

			.wz_desc {
				padding: 10px;
			}

			.wz_path {
				width: 50%;
				vertical-align:top;
			}

			#wz_formpanel {
				padding: 10px;
				position: relative;
			}

			.wz_logo {
				float: right;
				margin: 60px 50px 0 30px;
			}

			.wz_desc_right {
				position: absolute;
				left: 52%;
				float: right;
				width: 45%;
			}

			#wz_musicsource td {
				vertical-align: top;
				padding-top: 5px;
			}

			.wz_summary_list {
				list-style-type: circle;
				margin-left: 20px;
			}

			#language {
				position: absolute;
				top: 30px;
				right: 50px;
			}

			#loading-mask {
				width: 120%;
				height: 100%;
				background-image: url(/Default/html/images/background.png);
				position: absolute;
				z-index: 20000;
				left: 0;
				top: 0;
			}

			#loading {
				position: absolute;
				left: 40%;
				top: 40%;
				text-align: center;
				z-index: 20001;
				display: none;
			}

			.x-tree .x-panel-body {
				border: none;
			}

			#loading .loading-indicator,
			a { color: green; }

			#noJS { color: white; }
			#noJS a, #noJS a:visited { color: yellow; }
			
			.loading-indicator {
				background-image: url(/Default/html/images/loading.gif);
			}

			[% IF rtl %]
				.x-layout-panel, .x-btn,
				.x-btn-text-icon .x-btn-center .x-btn-text{
					direction: rtl
				}
				
				.x-btn-text-icon .x-btn-center .x-btn-text{
					background-position: 100% 2px;
					padding-right:18px;
					padding-left:0;
				}
				
				.x-layout-panel-hd-text{
					width:100%;
				}
				
				.x-layout-panel-hd-tools{
					left:0;
				}
				
				.x-layout-tools-button{
					float:left;
				}

				.wz_desc_right {
					left: 0;
				}

				.x-btn-left {
					background: url(/Default/html/images/slim-ext/btn-generic.png) no-repeat 0 -19px;
				}

				.x-btn-right {
					background: url(/Default/html/images/slim-ext/btn-generic.png) no-repeat 0 0;
				}

				.x-btn-over .x-btn-left, .x-btn-menu-active .x-btn-left { background-position:0 -76px; }
				.x-btn-over .x-btn-right, .x-btn-menu-active .x-btn-right { background-position:0 -57px; }
				.x-btn-click .x-btn-left, .x-btn-pressed .x-btn-left  { background-position:0 -133px; }
				.x-btn-click .x-btn-right, .x-btn-pressed .x-btn-right { background-position:0 -114px; }

			[% END %]
		-->
		</style>

		<!--[if lte IE 6]>
		<link href="/Default/ie.css?r=[% revision %]" type="text/css" rel="stylesheet">
		<![endif]-->
		<!--[if IE 7]>
		<link href="/Default/ie7.css?r=[% revision %]" type="text/css" rel="stylesheet">
		<![endif]-->
	</head>

	<body class="singlePanel">
		<img id="background" src="/Default/html/images/background.png" />

		<div id="loading-mask">&#160;</div>
		<div id="loading">
			<div class="loading-indicator">
				[% "LOADING_SQUEEZECENTER" | string %]
			</div>
		</div>
		<div id="noJS">[% "SETUP_NO_JAVASCRIPT" | string %]</div>

		<script type="text/javascript">
			document.getElementById('noJS').style.display = 'none';
			document.getElementById('loading').style.display = 'block';
		</script>

		<script type="text/javascript">[% PROCESS html/vars.js %]</script>
		<script type="text/javascript" src="/html/ext/adapter/ext/ext-base.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/html/ext/ext-all.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/html/SqueezeJS/Base.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/html/SqueezeJS/UI.js?r=[% revision %]"></script>
		<script type="text/javascript" src="/Default/html/Wizard.js?r=[% revision %]"></script>

		<script type="text/javascript">
			Ext.onReady(function(){
				[% PROCESS jsString id='SETUP_WIZARD_PREVIOUS' jsId='previous' %]
				[% PROCESS jsString id='SETUP_WIZARD_NEXT' jsId='next' %]
				[% PROCESS jsString id='SETUP_WIZARD_SKIP' jsId='skip' %]
				[% PROCESS jsString id='SETUP_WIZARD_FINISH' jsId='finish' %]
				[% PROCESS jsString id='SETUP_WIZARD_CLOSE' jsId='close' %]
				[% PROCESS jsString id='SETUP_SN_VALID_LOGIN' jsId='sn_success' %]
	
				[% PROCESS jsString id='NONE' jsId='summary_none' %]
				[% PROCESS jsString id='SETUP_AUDIODIR' jsId='summary_audiodir' %]
				SqueezeJS.Strings['summary_audiodir'] += '[% "COLON" | string %]';
				[% PROCESS jsString id='SETUP_PLAYLISTDIR' jsId='summary_playlistdir' %]
				SqueezeJS.Strings['summary_playlistdir'] += '[% "COLON" | string %]';
				[% PROCESS jsString id='ITUNES_DESC' jsId='summary_itunes' %]
				[% PROCESS jsString id='MUSICMAGIC_DESC' jsId='summary_musicmagic' %]

				try { Wizard.init([% wizardDone ? "true" : "false" %]); }
				catch(e) {
					document.getElementById('loading').style.display = 'none';
					document.getElementById('noJS').style.display = 'block';
					[% IF !debug %]window.setTimeout(function(){location.href = '/classic'}, 10000);[% END %]
				}
			});
		</script>

		<div id="header">
			<div id="header_left"></div>
			<div id="header_content">
				<span><img src="[% webroot %]html/images/spacer.gif" id="squeezeCenterLogo"></span>
				<span><a href="http://www.slimdevices.com" target="_blank"><img src="[% webroot %]html/images/spacer.gif" id="logitechLogo"></a></span>
			</div>
		</div>

		<div id="inner_header">
			<div class="inner">
				<div class="inner_top"></div>
				<div class="inner_top_left">&nbsp;</div>
				<div class="inner_top_right"></div>
			</div>
		</div>


		<div id="inner_footer">
			<div id="infoTab" class="buttonbar">
				<table id="buttonbar">
					<tr>
						<td><span id="skip"></span></td>
						<td><span id="back"></span></td>
						<td><span id="next"></span></td>
					<tr>
				</table>
			</div>				

			<div class="inner">
				<div class="inner_bottom"></div>
				<div class="inner_bottom_left">&nbsp;</div>
				<div class="inner_bottom_right">&nbsp;</div>
			</div>
		</div>

		<div id="footer">
			<div id="footer_left"></div>
			<div id="footer_content">
			</div>
		</div>

		<!-- the wizard's tabs: make them all use the same class, which is iterated by the JS -->
		[% UNLESS wizardDone %]

		<div id="welcome" class="wz_page">
			<div id="welcome_h" class="pagetitle">[% "SETUP_WIZARD_WELCOME" | string %]</div>

			<div class="wz_logo"><img src="[% webroot %]html/images/squeezebox-family.jpg"></div>
			<div class="wz_desc">
				<div>[% "SETUP_WIZARD_WELCOME_DESC" | string(sn_server, sn_server) %]</div>
	
				<form name="languageForm" id="languageForm" method="post" action="[% webroot %][% path %]">
					<select name="language" id="language">
	
						[% FOREACH option = languageoptions %]
							[% IF !option.value.search('\*') %]
								<option [% IF prefs.language == option.key %]selected="selected" [% preferredLanguage=1;END %]value="[% option.key %]">[% option.value %]</option>
							[% END %]
						[%- END -%]
	
						[% IF !preferredLanguage %]
							<option selected="selected" value="[% prefs.language %]">[% languageoptions.${prefs.language} %]</option>
						[% END %]
	
					</select>
					<input name="saveLanguage" type="hidden" value="1">
				</form>
			</div>
		</div>

		<form name="wizardForm" id="wizardForm" method="post" action="[% webroot %][% path %]">
			[% IF showProxy %]
				<div id="proxy_p" class="wz_page">
					<div id="proxy_h" class="pagetitle">[% "SETUP_WIZARD_PROXY" | string %]</div>
					<div class="wz_desc">
						<div>[% "SETUP_WIZARD_PROXY_DESC" | string %]</div>
						<div>[% "SETUP_WEBPROXY_CHOOSE" | string %][% "COLON" | string %]
							<input type="text" name="webproxy" value="[% prefs.webproxy %]">
						</div>
					</div>
				</div>
			[% END %]

			<div id="sqn_p" class="wz_page wz_canskip">
				<div id="sqn_p" class="pagetitle">[% "SETUP_WIZARD_SQN" | string %]</div>

				<div class="wz_desc">
					<div>[% "SETUP_WIZARD_SQN_DESC" | string %]<br>&nbsp;</div>

					<div><table>
						<tr>
							<td>[% "SETUP_SN_EMAIL" | string %][% "COLON" | string %]</td>
							<td><input type="text" name="sn_email" id="sn_email" value="[% prefs.sn_email %]" size="40"></td>
						</tr>
						<tr>
							<td>[% "SETUP_SN_PASSWORD" | string %][% "COLON" | string %]&nbsp;</td>
							<td><input type="password" name="sn_password_sha" id="sn_password_sha" value="[% prefs.sn_password_sha %]" size="40"></td>
						</tr>
						<tr>
							<td colspan="2" align="right">
								<div><a href="http://[% sn_server %]/user/forgotPassword" target="SQN">[% "SETUP_SN_FORGOT_PASSWORD" | string%]</a></div>
								<div><a href="http://[% sn_server %]/" target="SQN">[% "SETUP_SN_NEED_ACCOUNT" | string%]</a></div>
							</td>
						</tr>
					</table></div>

					<hr />
					<div>
						[% "SETUP_SN_REPORT_STATS_DESC" | string %]<br />
						<br />
						<select class="stdedit" name="sn_disable_stats" id="sn_disable_stats">
							<option [% IF !prefs.sn_disable_stats %]selected="selected" [% END %]value="0">
								[% 'SETUP_SN_REPORT_STATS_ENABLE' | string %]
							</option>
							<option [% IF prefs.sn_disable_stats == 1 %]selected="selected" [% END %]value="1">
								[% 'SETUP_SN_REPORT_STATS_DISABLE' | string %]
							</option>
						</select>
						<br />
						<br />
					</div>
					
					<div id="sn_result"></div>
				</div>
			</div>

			<div id="source_p" class="wz_page">
				<div id="source_h" class="pagetitle">[% "SETUP_WIZARD_SOURCE" | string %]</div>

				<div class="wz_desc">
					<div>[% "SETUP_WIZARD_SOURCE_DESC" | string %]</div>
					<div><table id="wz_musicsource">
						<tr>
							<td><input type="checkbox" name="useAudiodir" id="useAudiodir" [% IF useAudiodir %]checked="1" [% END %]>&nbsp;</td>
							<td>[% "SETUP_WIZARD_SOURCE_AUDIODIR" | string %]</td>
						</tr>
						<tr>
							<td><input type="checkbox" name="itunes" id="itunes" [% IF prefs.itunes %]checked="1" [% END %] value="1"></td>
							<td>[% "SETUP_WIZARD_SOURCE_ITUNES" | string %]</td>
						</tr>
						<tr>
							<td><input type="checkbox" name="musicip" id="musicmagic" [% IF prefs.musicip %]checked="1" [% END %] value="1"></td>
							<td>[% "SETUP_WIZARD_SOURCE_MUSICIP" | string %]</td>
						</tr>
					</table></div>
				</div>
			</div>

			<div id="audiodir_p" class="wz_page">
				<div id="audiodir_h" class="pagetitle">[% "SETUP_WIZARD_AUDIODIR" | string %]</div>

				<div class="wz_desc">
					<div class="wz_desc_right">
						[% "SETUP_WIZARD_AUDIODIR_DESC" | string %]
						[% serverOS == "win" ? "SETUP_WIZARD_SHARE_WIN" : "SETUP_WIZARD_SHARE_OTHERS" | string %]
					</div>
					<div id="audiodirselector" class="folderselector" style="position:relative"></div>
					<div>
						<input type="text" name="audiodir" id="audiodir" value="[% prefs.audiodir %]" class="wz_path">
					</div>
				</div>
			</div>

			<div id="playlistdir_p" class="wz_page">
				<div id="playlistdir_h" class="pagetitle">[% "SETUP_WIZARD_PLAYLISTDIR" | string %]</div>

				<div class="wz_desc">
					<div class="wz_desc_right">
						[% "SETUP_WIZARD_PLAYLISTDIR_DESC" | string %]
						[% serverOS == "win" ? "SETUP_WIZARD_SHARE_WIN" : "SETUP_WIZARD_SHARE_OTHERS" | string %]
					</div>
					<div id="playlistdirselector" class="folderselector"></div>
					<div>
						<input type="text" name="playlistdir" id="playlistdir" value="[% prefs.playlistdir %]" class="wz_path">
					</div>
				</div>
			</div>

			[% IF showiTunes %]
				<div id="itunes_p" class="wz_page">
					<div id="itunes_h" class="pagetitle">[% "SETUP_WIZARD_ITUNES" | string %]</div>

					<div class="wz_desc">
						<div class="wz_desc_right">
							[% "SETUP_WIZARD_ITUNES_DESC" | string %]
							[% serverOS == "win" ? "SETUP_WIZARD_SHARE_WIN" : "SETUP_WIZARD_SHARE_OTHERS" | string %]
						</div>
						<div id="itunespathselector" class="folderselector"></div>
						<div>
							<input type="text" name="xml_file" id="xml_file" value="[% prefs.xml_file %]" class="wz_path">
						</div>
					</div>
				</div>
			[% END %]

			[% IF showMusicIP %]
				<div id="musicip_p" class="wz_page">
					<div id="musicip_h" class="pagetitle">[% "SETUP_WIZARD_MUSICIP" | string %]</div>

					<div class="wz_desc">
						<div>[% "SETUP_WIZARD_MUSICIP_DESC" | string %]</div>
						<br/>
						<div><input type="text" name="port" id="port" value="[% prefs.port %]" size="20"></div>
						<br/>
						<div>[% "SETUP_WIZARD_MUSICIP_DESC2" | string %]</div>
						<div>[% "SETUP_WIZARD_MUSICIP_DESC3" | string %]</div>
					</div>
				</div>
			[% END %]

			<div id="summary_p" class="wz_page wz_finish">
				<div id="summary_h" class="pagetitle">[% "SETUP_WIZARD_SUMMARY" | string %]</div>

				<div class="wz_desc">
					<div>[% "SETUP_WIZARD_SUMMARY_DESC" | string %]</div>
					<br/>
	
					<div>[% "SETUP_WIZARD_SUMMARY_SQN" | string %]</div>
					<ul class="wz_summary_list">
						<li><span id="sn_email_summary"></span> <span id="sn_result_summary">[% "NONE" | string %]</span></li>
					</ul>
					<br/>
	
					<div>[% "SETUP_WIZARD_SUMMARY_MUSICSOURCE" | string %][% "COLON" | string %]</div>
					<ul class="wz_summary_list" id="summary"></ul>
					<br/>
	
					<div>[% "SETUP_WIZARD_SUMMARY_RESCAN" | string %]</div>
				</div>
			</div>

			[% IF firstTimeRun %]
			<input name="firstTimeRunCompleted" type="hidden" value="1">
			[% END %]
			<input name="saveSettings" type="hidden" value="1">
		</form>

		[% ELSE %]

		<div id="done_p" class="wz_page wz_finish">
			<div id="done_h" class="pagetitle">[% "SETUP_WIZARD_DONE" | string %]</div>
			<div class="wz_desc">[% "SETUP_WIZARD_DONE_DESC" | string %]</div>
		</div>

		[% END %]
	</body>
</html>
